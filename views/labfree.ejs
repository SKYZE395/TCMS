<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAB OCCUPANCY</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css" integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" integrity="sha384-tKLJeE1ALTUwtXlaGjJYM3sejfssWdAaWR2s97axw4xkiAdMzQjtOjgcyw0Y50KU" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/admin.css">
</head>
<body>
    <header class="tt">
        <a href="#" class="logo">Teacher's Desk</a>
        <img class="tt_logo2" src = "/assets/manipal_logo.png" alt="manipal_logo"></img>
        <div class="toggle">
        </div>
            <ul>
                <li><a href="/home">Home</a></li>
                <li><a href="/home/time_table">Time Table</a></li>
                <li><a href="/Prefrences">Prefrences</a></li>
                <li><a href="/Notes">Notes</a></li>
                <li><a href="/Attainment">Attainment</a></li>
                <li><a href="/">Logout</a></li>
                
            </ul>
    </header>
    <br><br><br>
    <br>
    <table border=1 id="labtable"><thead><tr><th>LAB</th><th colspan="2">MONDAY</th><th colspan="2">TUESDAY</th><th colspan="2">WEDNESDAY</th><th colspan="2">THURSDAY</th><th colspan="2">FRIDAY</th><th colspan="2">SATURDAY</th></tr><tr><th></th><th>MORNING</th><th>EVENING</th><th>MORNING</th><th>EVENING</th><th>MORNING</th><th>EVENING</th><th>MORNING</th><th>EVENING</th><th>MORNING</th><th>EVENING</th><th>MORNING</th><th>EVENING</th></tr></thead><tbody></tbody></table>
    <div class="container">
        <table border="1" id="labtable">
            <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
            <script>
                var x = [];
                var y = [];
        
                var vaca = [];
        
                axios.get('/labfree',{
        
                })
                    .then(response=>{
                        try{
                            const options = response.data;
                            options.forEach(option => {
                                Object.values(option).forEach(value=>{
                                    if(value.indexOf("0")==0){
                                        x.push(0);
                                    }
                                    else{
                                        x.push(value);
                                    }
                                })
                                y.push(x);
                                x=[];
                            });
                            console.log(y);
                            var index = 0;
                            y.forEach(field=>{
                                for(let i=1;i<13;i++){
                                    if(field[i]==0){
                                        vaca.push("FREE");
                                    }
                                    else{
                                        vaca.push(field[i]);
                                    }
                                }
                            })
                            console.log(vaca);
                        }catch(error){
                            console.log(error);
                        }
                    })
                    .catch(error=>{
                        console.error(error);
                    }) 
                var table = document.querySelector("#labtable tbody");
        
        
                axios.get('/labfree',{
        
                })
                    .then(response=>{
                        var i=0;
                        const options = response.data;
                        options.forEach(option=>{  
                            var row = document.createElement("tr");
                            var data = document.createElement("td");
                            var data2 = document.createElement("td");
                            var data3 = document.createElement("td");
                            var data4 = document.createElement("td");
                            var data5 = document.createElement("td");
                            var data6 = document.createElement("td");
                            var data7 = document.createElement("td");
                            var data8 = document.createElement("td");
                            var data9 = document.createElement("td");
                            var data10 = document.createElement("td");
                            var data11 = document.createElement("td");
                            var data12 = document.createElement("td");
                            var data13 = document.createElement("td");
        
                            data.textContent = option.room;
                            row.appendChild(data);
                            data2.textContent = vaca[i];
                            row.appendChild(data2);
                            data3.textContent = vaca[i+1]
                            row.appendChild(data3);
                            data4.textContent = vaca[i+2]
                            row.appendChild(data4);
                            data5.textContent = vaca[i+3]
                            row.appendChild(data5);
                            data6.textContent = vaca[i+4]
                            row.appendChild(data6);
                            data7.textContent = vaca[i+5]
                            row.appendChild(data7);
                            data8.textContent = vaca[i+6]
                            row.appendChild(data8);
                            data9.textContent = vaca[i+7]
                            row.appendChild(data9);
                            data10.textContent = vaca[i+8]
                            row.appendChild(data10);
                            data11.textContent = vaca[i+9]
                            row.appendChild(data11);
                            data12.textContent = vaca[i+10]
                            row.appendChild(data12);
                            data13.textContent = vaca[i+11]
                            row.appendChild(data13);
                            table.appendChild(row);
                            i+=12;
                        })
                    })
                    .catch(error=>{
                        console.error(error);
                    })
            </script>
        </table>
      </div>
      <button class="no-print" onclick="window.print()">DOWNLOAD</button>
</body>
</html>